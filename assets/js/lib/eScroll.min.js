!function(e,t,i){function o(){var e=[].shift.call(arguments);this.el=e.el,this.direction=e.direction||"top",this.scrollBar=e.scrollBar,this.scrollTo=e.scrollTo||0,this.prevBtn=e.prevBtn,this.nextBtn=e.nextBtn,this.speed=e.speed||10,this.barSpeed=0,this.autoScroll=e.autoScroll,this.focus=e.focus,this.smoothMode=e.smoothMode,this.init=e.init,this.ajaxBtn=e.ajaxBtn,this.done=e.done,this.activeDirection=e.activeDirection||"down",this._callbackLock_=!0,this.cache={els_pos:0,sb_pos:0,ms_pos:0,ms_lastpos:0},this.CriticalBar={low:0,high:0},this.CriticalEl={low:0,high:0},this.initialize()}o.prototype={initialize:function(){if(this.focus&&!o.isMobile&&this.barFocus(),(this.prevBtn||this.nextBtn)&&this.doBtnEvent(),this.autoScroll,this.resize&&this.resizeBar(),this.done)if(this.done.timmer=null,this.ajaxBtn){var e=this;this.activeType=0,o.addEvent(this.ajaxBtn,"click",function(t){e.doneCallback(e.done),t.preventDefault?t.preventDefault():t.returnValue=!1})}else this.activeType=1;this.initScrollBar(),this.bind()},mousewheel:function(t){var i=this;"onmousewheel"in this.el?this.el.onmousewheel=function(o){var o=o||e.event;o._detail=o.wheelDelta/120,t.call(i,o)}:this.el.addEventListener("DOMMouseScroll",function(o){var o=o||e.event;o._detail=-(o.detail||0)/3,t.call(i,o)},!1)},initScrollBar:function(){this.buildBar(),o.isMobile||this.initDrag(),this.scrollTo&&this.doScrollto()},buildBar:function(){var e=this.el.parentNode,t=e.style;"none"===o.getStyle(e,"display")&&(e.tmpStyle=t.cssText,t.cssText+=";position: absolute;visibility:hidden;display:block;"),-1!==navigator.userAgent.indexOf("MSIE 8.0")&&!o.getStyle(this.scrollBar.parentNode,"z-index")&&(this.scrollBar.parentNode.style.zIndex=0);var s="top"===this.direction?"offsetHeight":"offsetWidth",n=this.scrollBar.style;n[this.direction]=this.prevBtn?(this.CriticalBar.low=this.prevBtn[s])+"px":0,this.elHeight="top"===this.direction?this.el.scrollHeight:this.el.scrollWidth;var r="top"===this.direction?"height":"width",a=this.el[s],l=this.scrollBar.parentNode[s]-(this.prevBtn?this.prevBtn[s]:0)-(this.nextBtn?this.nextBtn[s]:0);this.cache.sb_pos=Math.floor(this.cache.els_pos*l/this.elHeight)+this.CriticalBar.low,n[this.direction]=this.cache.sb_pos+"px",n[r]=Math.floor(a*l/this.elHeight)+"px",this.CriticalBar.high=l-parseInt(n[r],10)+this.CriticalBar.low,this.barSpeed=(l-this.scrollBar[s])*this.speed/(this.CriticalEl.high=this.elHeight-a,this.CriticalEl.high)||0,"undefined"!=typeof e.tmpStyle&&(t.cssText=e.tmpStyle,e.tmpStyle=i)},initDrag:function(){var s=!1,n=this.scrollBar,r=this.cache,a="top"===this.direction?"scrollTop":"scrollLeft",l="top"===this.direction?"clientY":"clientX",c=this.activeDirection,h=!1,u=this.el,p=u.parentNode,d=this.scrollBar.style,m=this;n.onmousedown=function(n){var n=n||e.event;r.ms_pos=n[l],s=!0,p.mouseout&&(o.detachEvent(p,"mouseover",p.mouseover),o.detachEvent(p,"mouseout",p.mouseout)),t.onselectstart=function(){return!1},t.onmousemove=function(t){var t=t||e.event;if(s){r.ms_lastpos=t[l];var i,o=r.ms_lastpos-r.ms_pos,n=r.sb_pos+o;n<m.CriticalBar.low&&(n=m.CriticalBar.low),n>=m.CriticalBar.high&&(n=m.CriticalBar.high),i=o*m.speed/m.barSpeed,u[a]=r.els_pos+i,d[m.direction]=n+"px"}t.preventDefault?t.preventDefault():t.returnValue=!1},t.onmouseup=function(){s=!1,r.els_pos=u[a],r.sb_pos=parseInt(d[m.direction],10);try{t.onselectstart=t.onmouseup=t.onmousemove=i}catch(e){}p.mouseout&&(o.addEvent(p,"mouseover",p.mouseover),o.addEvent(p,"mouseout",p.mouseout)),h="up"===c?r.sb_pos===m.CriticalBar.low:r.sb_pos===m.CriticalBar.high,h&&m.done&&m.activeType&&m.doneCallback(m.done)}}},bind:function(){var e="top"===this.direction?"scrollTop":"scrollLeft";if(o.isMobile){var s=!1,n=(this.scrollBar,this.cache),r="top"===this.direction?"pageY":"pageX",a=this.activeDirection,l=!1,c=this.el,h=(c.parentNode,this.scrollBar.style),u=this;this.el.addEventListener("touchstart",function(o){function p(t){if(s){n.ms_lastpos=t.touches[0][r];var i,o=n.ms_pos-n.ms_lastpos,a=n.sb_pos+o;a<u.CriticalBar.low&&(a=u.CriticalBar.low),a>=u.CriticalBar.high&&(a=u.CriticalBar.high),i=o*u.speed/u.barSpeed,c[e]=n.els_pos+i,h[u.direction]=a+"px"}t.preventDefault()}function d(){s=!1,n.els_pos=c[e],n.sb_pos=parseInt(h[u.direction],10);try{t.onselectstart=i,u.el.removeEventListener("touchmove",p,!1),u.el.removeEventListener("touchend",d,!1)}catch(o){}l="up"===a?n.sb_pos===u.CriticalBar.low:n.sb_pos===u.CriticalBar.high,l&&u.done&&u.activeType&&u.doneCallback(u.done)}n.ms_pos=o.touches[0][r],s=!0,t.onselectstart=function(){return!1},u.el.addEventListener("touchmove",p,!1),u.el.addEventListener("touchend",d,!1)},!1)}else this.mousewheel(function(t){t._detail<0?this.process({barSpeed:this.barSpeed,speed:this.speed,direction:e}):t._detail>0&&this.process({barSpeed:-this.barSpeed,speed:-this.speed,direction:e})}),this.unbindDocumentEvent();this.init&&this.init()},unbindDocumentEvent:function(){var e=this;o.addEvent(this.el,"mouseover",function(i){var s=i.relateTarget||i.fromElement;o.isContains(e.el,s)||("onmousewheel"in e.el?t.onmousewheel=function(){return!1}:(t.tmpDOMMouseScroll=function(e){e.preventDefault()},t.addEventListener("DOMMouseScroll",t.tmpDOMMouseScroll,!1)))}),o.addEvent(this.el,"mouseout",function(i){var s=i.relateTarget||i.toElement;o.isContains(e.el,s)||("onmousewheel"in e.el?t.onmousewheel=null:t.removeEventListener("DOMMouseScroll",t.tmpDOMMouseScroll,!1))})},doScrollto:function(){if(!(this.scrollTo>this.CriticalEl.high||this.scrollTo<this.CriticalEl.low)){var e="top"===this.direction?"scrollTop":"scrollLeft";this.cache.els_pos=this.el[e]=this.scrollTo,this.scrollBar.style[this.direction]=(this.cache.sb_pos+=this.scrollTo/this.speed*this.barSpeed)+"px"}},scrollOffset:function(e,t){var i,o,s,n=this,r="top"===this.direction?"scrollTop":"scrollLeft";this.scrollTo>this.CriticalEl.high||this.scrollTo<this.CriticalEl.low||(t?(this.offsetTimmer&&clearTimeout(n.offsetTimmer),o=(e-this.cache.els_pos)/t*24,s=+new Date,(i=function(){+new Date-s<t?(n.el[r]=n.cache.els_pos+=o,n.scrollBar.style[n.direction]=(n.cache.sb_pos=n.cache.els_pos/n.speed*n.barSpeed)+"px",n.offsetTimmer=setTimeout(i,24)):(clearTimeout(n.offsetTimmer),n.cache.els_pos=n.el[r]=e,n.scrollBar.style[n.direction]=(n.cache.sb_pos=e/n.speed*n.barSpeed)+"px")})()):(this.cache.els_pos=this.el[r]=e,this.scrollBar.style[this.direction]=(this.cache.sb_pos=e/this.speed*this.barSpeed)+"px"))},doAutoScroll:function(){},doBtnEvent:function(){function t(t,o){var r,a,l;1===o?(r=s.speed,a=s.barSpeed,l=1):(r=-s.speed,a=-s.barSpeed,l=-1),function(){s.process({direction:n,speed:r,barSpeed:a}),i=e.requestAnimationFrame(arguments.callee)}()}var i,s=this,n=(s.el,"top"===this.direction?"scrollTop":"scrollLeft");o.isMobile?(this.nextBtn.addEventListener("touchstart",function(e){t(e,1),e.preventDefault()}),this.nextBtn.addEventListener("touchend",function(){e.cancelAnimationFrame(i)}),this.prevBtn.addEventListener("touchstart",function(e){t(e,-1),e.preventDefault()}),this.prevBtn.addEventListener("touchend",function(){e.cancelAnimationFrame(i)})):(this.nextBtn.onmousedown=function(i){var i=i||e.event;(1===i.which||1===i.button)&&t(i,1),i.preventDefault?i.preventDefault():i.returnValue=!1},this.prevBtn.onmousedown=function(i){var i=i||e.event;(1===i.which||1===i.button)&&t(i,-1),i.preventDefault?i.preventDefault():i.returnValue=!1},this.nextBtn.onmouseup=this.prevBtn.onmouseup=function(){e.cancelAnimationFrame(i)})},barFocus:function(){function t(t,o){var n=(o-t)/16;!function(){s.opacity=t,s.filter="alpha(opacity="+Math.floor(100*t)+")",t===o?(t>=1&&s.removeAttribute&&s.removeAttribute("filter"),e.cancelAnimationFrame(i)):(t+=n,i=e.requestAnimationFrame(arguments.callee))}()}var i,s=this.scrollBar.parentNode.style,n=this.el.parentNode;s.zoom=1;var r=function(i,s){var i=e.event||i,r=i.relatedTarget||i[s];o.isContains(n,r)||("fromElement"===s?t(0,1):t(1,0))};n.mouseover=function(e){r(e,"fromElement")},n.mouseout=function(e){r(e,"toElement")},o.addEvent(n,"mouseover",n.mouseover),o.addEvent(n,"mouseout",n.mouseout)},process:function(e){var t=e.direction,i=this.activeDirection,o=!1,s=this.el,n=this.scrollBar.style,r=this.cache;r.sb_pos+=e.barSpeed||this.barSpeed,r.sb_pos>=this.CriticalBar.high&&(r.sb_pos=this.CriticalBar.high,r.els_pos=this.CriticalEl.high),r.sb_pos<this.CriticalBar.low&&(r.sb_pos=this.CriticalBar.low,r.els_pos=this.CriticalEl.low),s[t]=r.els_pos+=e.speed,n[this.direction]=r.sb_pos+"px",o="up"===i?r.sb_pos===this.CriticalBar.low:r.sb_pos===this.CriticalBar.high,o&&this.done&&this.activeType&&this.doneCallback(this.done)},doneCallback:function(e){var t=this;clearTimeout(e.timmer),e.timmer=setTimeout(function(){e.call(t)},50)},ajax:function(i){function o(){"undefined"==typeof n.jsonp&&i.onerror&&i.onerror.call(s),n.clearAttributes?n.clearAttributes():n.onload=n.onreadystatechange=n.onerror=null,n.parentNode.removeChild(n),s._callbackLock_=!0}var s=this;if(s._callbackLock_)if(s._callbackLock_=!1,"jsonp"===i.type){var n=t.createElement("script"),r=i.callbackName?i.callbackName:"iScroll"+encodeURIComponent(location.href).replace(/[^\w\s]/g,"");e[r]=function(e){n.jsonp=1,i.onsuccse&&i.onsuccse.call(s,e),s._callbackLock_=!0,s.buildBar()},n.readyState?n.onreadystatechange=function(){/loaded|complete/i.test(n.readyState)?o():"loading"===n.readyState&&i.onprocess&&i.onprocess.call(s)}:n.onload=n.onerror=function(){o()},n.src=i.url+(-1!==i.url.indexOf("?")?"&callback=":"?callback=")+r,t.getElementsByTagName("head")[0].appendChild(n)}else{var a=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l="text/plain"===i.dataType||"undefined"==typeof i.dataType?"responseText":"text/xml"===i.dataType&&"responseXML",c=i.params||null;a.open(i.type?i.type:"get",i.url,!0),a.onreadystatechange=function(){4===a.readyState?(a.status>=200&&a.status<300||304===a.status?(i.onsuccse&&i.onsuccse.call(s,a[l]),s.buildBar()):i.onerror&&i.onerror.call(s,a.statusText),s._callbackLock_=!0):3===a.readyState&&i.onprocess&&i.onprocess.call(s)},"post"===i.type&&a.setRequestHeader("content-type","application/x-www-form-urlencoded"),a.send(c)}}},o.prototype.constructor=o,o.addEvent=function(e,t,i){return"function"==typeof addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},o.detachEvent=function(e,t,i){return"function"==typeof removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)},o.isContains=function(e,t){return e.contains?e.contains(t):16==e.compareDocumentPosition(t)},o.getStyle=function(t,i){return t.style[i]?t.style[i]:t.currentStyle?t.currentStyle[i]:e.getComputedStyle(t,null)[i]},o.isMobile="ontouchend"in t?!0:!1,e.requestAnimationFrame=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},e.cancelAnimationFrame=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame||e.oCancelAnimationFrame||function(e){return clearTimeout(e,1e3/60)};var s={init:function(e){var t=new o(e);if("function"==typeof Object.defineProperty&&-[1]){var i=["CriticalBar","CriticalEl","_callbackLock_","cache"];i.forEach(function(e){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!1})})}return t}};e.iScroll=s}(window,document);